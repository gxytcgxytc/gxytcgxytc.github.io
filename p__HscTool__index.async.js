"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[252],{60519:function(Pe,H,C){C.r(H),C.d(H,{default:function(){return Be}});var U=C(90930),V=C(5574),B=C.n(V),D=C(67294),z=C(34041),k=C(32643),E=C(4393),J=C(24074),Z=C(82346),Ee=[{label:"Ro16",value:"Ro16"},{label:"QF",value:"QF"},{label:"SF",value:"SF"},{label:"F",value:"F"},{label:"GF",value:"GF"}],X=[{value:"classA",label:"Class A",children:[{value:"a-set1",label:"Set 1"},{value:"a-set2",label:"Set 2"},{value:"a-set3",label:"Set 3"}]},{value:"classB",label:"Class B",children:[{value:"b-set1",label:"Set 1"},{value:"b-set2",label:"Set 2"},{value:"b-set3",label:"Set 3"}]},{value:"classC",label:"Class C",children:[{value:"c-set1",label:"Set 1"},{value:"c-set2",label:"Set 2"},{value:"c-set3",label:"Set 3"}]}],l=C(85893),$=z.Z.Option,K=function(){var e=k.Z.useForm(),t=B()(e,1),u=t[0],i=(0,Z.useModel)("HscTool.index"),n=i.config,o=i.setConfig;return D.useEffect(function(){u.setFieldsValue(n)},[n]),(0,l.jsx)(E.Z,{title:"\u6BD4\u8D5B\u914D\u7F6E",style:{marginBottom:20},children:(0,l.jsxs)(k.Z,{form:u,layout:"inline",onValuesChange:function(d,s){o(s)},children:[(0,l.jsx)(k.Z.Item,{name:"poolType",label:"\u56FE\u6C60\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u6C60\u7C7B\u578B"}],children:(0,l.jsx)(z.Z,{placeholder:"\u8BF7\u9009\u62E9\u56FE\u6C60\u7C7B\u578B",children:(0,l.jsx)($,{value:"Ro16",children:"Ro16"})})}),(0,l.jsx)(k.Z.Item,{name:"setType",label:"Class&Set",rules:[{required:!0,message:"select a set"}],children:(0,l.jsx)(J.Z,{options:X,fieldNames:{label:"label",value:"value"},placeholder:"\u8BF7\u9009\u62E9\u56FE\u6C60\u7C7B\u578B"})})]})})},q=K,_=C(71230),ee=C(15746),Q=C(5737),O=C(75398),te=C(19632),b=C.n(te),re=C(97857),A=C.n(re),ne=JSON.parse('{"Ro16":{"pool":{"S1":"NM","S2":"FM","S3":"HD","S4":"NM","S5":"HR","C1":"DT","C2":"FM","C3":"HD","C4":"NM","C5":"HR","C6":"DT","C7":"NM","C8":"NM","C9":"DT","TB":"TB"},"size":9},"QF":{"pool":{"Q1":"DT","Q2":"FM","Q3":"HD","Q4":"NM"},"size":4},"SF":{"pool":{"S1":"DT","S2":"FM","S3":"HD","S4":"NM"},"size":4},"F":{"pool":{"F1":"DT","F2":"FM","F3":"HD","F4":"NM"},"size":4},"GF":{"pool":{"G1":"DT","G2":"FM","G3":"HD","G4":"NM"},"size":4}}'),ie=function(e){return e.filter(function(t){return!t.isPicked})},Y=function(e,t,u){var i=e.filter(function(o){return o.team===u});if(i.length===0)return null;var n=i[i.length-1];return t.find(function(o){return o.id===n.mapId&&o.team===u})||null},ue=function(e,t,u,i){if(t.length===0)return e;var n=Y(t,u,i);if(!n||n.mod==="NM"||n.team==="all")return e;var o=e.filter(function(d){return d.mod!=="TB"&&d.mod!==n.mod||d.mod==="NM"}),r=u.find(function(d){return d.mod==="TB"});return o.length>0?o.concat([r]):e},se=function(e,t,u){var i=t.map(function(m){return u.find(function(F){return F.id===m.mapId})}).filter(Boolean).filter(function(m){return m.mod!=="TB"}),n=u.find(function(m){return m.mod==="TB"&&m.isPicked}),o=u.find(function(m){return m.mod==="TB"}),r=i.slice(0,5),d=new Set(r.map(function(m){return m.mod})),s=d.size>=5&&d.has("NM")&&d.has("HD")&&d.has("HR")&&d.has("DT")&&d.has("FM");if(s&&i.length>=5){for(var M=r.map(function(m){return m.mod}),h=i.length%5,c=M[h],I=e.filter(function(m){return m.mod===c}),v=!0,g=0;g<i.length;g++)if(M[g%5]!==i[g].mod){v=!1;break}return I.length>0&&v?I.concat(n?[]:[o]):e}if(i.length>=5){var a={};e.filter(function(m){return m.mod!=="TB"}).forEach(function(m){a[m.mod]=(a[m.mod]||0)+1});var N=0,y=[];return Object.entries(a).forEach(function(m){var F=B()(m,2),R=F[0],p=F[1];p>N?(N=p,y=[R]):p===N&&y.push(R)}),e.filter(function(m){return y.includes(m.mod)}).concat(n?[]:[o])}return e},le=function(e,t,u,i,n){var o;if(t.length===0)return e;var r=parseInt(t[t.length-1].mapId.replace(/[^0-9]/g,"")),d=parseInt((o=t[t.length-2])===null||o===void 0?void 0:o.mapId.replace(/[^0-9]/g,"")),s=t.filter(function(v){return v.team===n}).map(function(v){return u.find(function(g){return g.id===v.mapId})}).filter(Boolean);if(s.length===0&&i.length>0){var M=n==="red"?"blue":"red",h=i.find(function(v){return v.team===M});if(h){var c=e.filter(function(v){return v.mod===h.mod});return r>d&&(c=c.filter(function(v){var g=parseInt(v.id.replace(/[^0-9]/g,""));return g<r})),c.length>0?c:e}}if(t.length>=1)if(r>d){var I=e.filter(function(v){var g=parseInt(v.id.replace(/[^0-9]/g,""));return g<r});return I.length>0?I:e}else return e;return e},ae=function(e,t,u){var i=t.map(function(M){return u.find(function(h){return h.id===M.mapId})}).filter(Boolean);if(i.length>=2){var n=function(h){if(h==="TB")return 1;var c=parseInt(h.replace(/[^0-9]/g,""));return isNaN(c)?0:c},o=n(i[i.length-1].id),r=n(i[i.length-2].id),d=o+r,s=e.filter(function(M){var h=n(M.id);return h===d});if(s.length>0)return s}return e},oe=function(e,t,u,i,n){if(n.restrictedMod){var o,r=t.length%2===0?"blue":"red",d=((o=n.teamPickCounts)===null||o===void 0?void 0:o[r])||{},s=Object.values(d).reduce(function(c,I){return c+I},0);if(s<3){var M=e.filter(function(c){return c.mod!==n.restrictedMod});return M.length>0?M:e}else if(s>=3&&s<=4){var h=e.filter(function(c){return c.mod===n.restrictedMod});return h.length>0?h:e}}return e},ce=function(e,t,u,i){var n=t.length+1,o=n%2===0,r=e.filter(function(a){if(a.id==="TB")return!0;var N=parseInt(a.id.replace(/[^0-9]/g,"")),y=N%2===0;return o?!y:y});if(r.length===0)return e;var d=u.filter(function(a){return a.id.startsWith("S")&&!a.isStriked&&!a.isPicked}).length,s=u.filter(function(a){return a.id.startsWith("C")&&!a.isStriked&&!a.isPicked}).length,M=i.boNumber,h={NM:e.filter(function(a){return a.mod==="NM"}).length,HD:e.filter(function(a){return a.mod==="HD"}).length,HR:e.filter(function(a){return a.mod==="HR"}).length,DT:e.filter(function(a){return a.mod==="DT"}).length,FM:e.filter(function(a){return a.mod==="FM"}).length},c=[[d,s,M],[h.NM,h.HD,h.HR],[h.DT,h.FM,n]],I=c[0][0]*(c[1][1]*c[2][2]-c[1][2]*c[2][1])-c[0][1]*(c[1][0]*c[2][2]-c[1][2]*c[2][0])+c[0][2]*(c[1][0]*c[2][1]-c[1][1]*c[2][0]),v=I%2!==0,g=r.filter(function(a){return a.mod==="TB"?!0:v?["HD","HR","FM"].includes(a.mod):["NM","DT"].includes(a.mod)});return g.length>0?g:r},de=function(e,t,u){var i=t.map(function(s){return u.find(function(M){return M.id===s.mapId})}).filter(Boolean);if(i.length>=6){var n=["NM","HD","HR","DT","FM"],o=new Set(i.map(function(s){return s.mod}).filter(function(s){return n.includes(s)})),r=n.filter(function(s){return!o.has(s)});if(r.length>0){var d=e.filter(function(s){return r.includes(s.mod)||s.mod==="TB"});return d.length>0?d:e}}return e},fe=function(e,t,u,i){if(i.winningMods&&i.winningMods.length>0){var n=e.filter(function(r){return!i.winningMods.includes(r.mod)||r.mod==="TB"});if(n.length>0)return n}if(i.lostMods&&i.lostMods.length>0){var o=e.filter(function(r){return i.lostMods.includes(r.mod)||r.mod==="TB"});if(o.length>0)return o}return e},ve=function(e,t,u){var i=Y(t,u);if(!i)return e;var n=["NM","HD","HR","DT","FM","NM"],o=n.indexOf(i.mod);if(o!==-1){var r=[n[(o-1+n.length)%n.length],n[(o+1)%n.length]],d=e.filter(function(v){return r.includes(v.mod)||v.mod==="TB"});if(d.length>0)return d}var s=[].concat(b()(e),[i]).sort(function(v,g){return v.id.startsWith("S")&&g.id.startsWith("S")?parseInt(v.id.slice(1))-parseInt(g.id.slice(1)):v.id.startsWith("S")?-1:g.id.startsWith("S")?1:v.id.startsWith("C")&&g.id.startsWith("C")?parseInt(v.id.slice(1))-parseInt(g.id.slice(1)):v.id.localeCompare(g.id)}),M=s.findIndex(function(v){return v.id===i.id});if(M!==-1){var h=(M-1+s.length)%s.length,c=(M+1)%s.length,I=e.filter(function(v){return v.id!==s[h].id&&v.id!==s[c].id});return I}return e},Me=function(e,t,u,i,n){var o,r=ie(e);switch((o=i.setType)===null||o===void 0?void 0:o[1]){case"a-set1":return ue(r,t,e,n);case"a-set2":return se(r,t,e);case"a-set3":return le(r,t,e,u,n);case"b-set1":return ae(r,t,e);case"b-set2":return oe(r,t,e,u,i);case"b-set3":return ce(r,t,e,i);case"c-set1":return de(r,t,e);case"c-set2":return fe(r,t,e,i);case"c-set3":return ve(r,t,e);default:return r}},ge={poolType:"Ro16",classType:"Class C",setType:["Class C","c-set3"],boNumber:7,currentPick:0,teamPickCounts:{blue:{},red:{}},lostMods:[],winningMods:[]},he=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,e=(0,D.useState)([]),t=B()(e,2),u=t[0],i=t[1],n=(0,D.useState)([]),o=B()(n,2),r=o[0],d=o[1],s=(0,D.useState)([]),M=B()(s,2),h=M[0],c=M[1],I=(0,D.useState)(9),v=B()(I,2),g=v[0],a=v[1];(0,D.useEffect)(function(){var p=ne[f.poolType];if(p){var S=Object.entries(p.pool).map(function(x){var T=B()(x,2),j=T[0],L=T[1];return{id:j,mod:L,isStriked:!1,isPicked:!1}});i(S),d([]),c([]),a(p.size)}},[f.poolType]);var N=(0,D.useCallback)(function(p,S){var x=u.find(function(T){return T.id===p});x&&(i(function(T){return T.map(function(j){return j.id===p?A()(A()({},j),{},{isStriked:!j.isStriked}):j})}),x.isStriked?c(function(T){return T.filter(function(j){return j.id!==p})}):c(function(T){return[].concat(b()(T),[{id:p,mod:x.mod,team:S,isStriked:!0,isPicked:!1}])}))},[u]),y=(0,D.useCallback)(function(p,S){var x=u.find(function(j){return j.id===p});if(x){var T=r.length+1;i(function(j){return j.map(function(L){return L.id===p?A()(A()({},L),{},{isPicked:!0,pickOrder:T,team:S}):L})}),d(function(j){return[].concat(b()(j),[{mapId:p,team:S,order:T,mod:x.mod}])}),f.teamPickCounts||(f.teamPickCounts={blue:{},red:{}}),f.teamPickCounts[S]||(f.teamPickCounts[S]={}),f.teamPickCounts[S][x.mod]=(f.teamPickCounts[S][x.mod]||0)+1}},[u,r,f]),m=(0,D.useCallback)(function(){return u.filter(function(p){return!p.isPicked&&!p.isStriked})},[u]),F=(0,D.useCallback)(function(){if(r.length===0)return null;var p=r[r.length-1];return u.find(function(S){return S.id===p.mapId})},[r,u]);(0,D.useEffect)(function(){if(!(r.length>0)){var p=u.filter(function(x){return x.id.startsWith("S")}),S=p.filter(function(x){return!x.isStriked});S.length===1&&y(S[0].id,"all")}},[u,r.length,y]);var R=(0,D.useCallback)(function(p){var S=r.findIndex(function(T){return T.mapId===p});if(S!==-1){var x=r.slice(0,S);d(x),i(function(T){return T.map(function(j){var L=r.slice(S),Le=L.some(function(Fe){return Fe.mapId===j.id});return Le?A()(A()({},j),{},{isPicked:!1,pickOrder:void 0,team:void 0}):S===0?A()(A()({},j),{},{isStriked:!1}):j})}),S===0&&c([])}},[r]);return{mapPool:u,matchHistory:r,setMatchHistory:d,strikedMaps:h,strikeMap:N,pickMap:y,availableMaps:m(),getNextAvailableMaps:function(S){return Me(u,r,h,f,S)},lastPickedMap:F(),resetToMap:R,bo:g}},pe=C(66309),me=function(e){var t={NM:"default",HD:"orange",HR:"red",DT:"blue",FM:"green",TB:"purple"};return t[e]||"default"},P=function(e,t){return(0,l.jsxs)(pe.Z,{color:me(t),children:[e,"-",t]},e)},Se=function(e){var t=e.mapPool,u=e.onMapSelect,i=e.currentStage,n=t.filter(function(s){return s.id.startsWith("S")}),o=t.filter(function(s){return s.id.startsWith("C")}),r=t.filter(function(s){return s.mod==="TB"}),d=function(M){var h=M.isPicked,c=M.isStriked;return(0,l.jsx)(O.ZP,{type:"text",onClick:function(){return u(M.id,M.mod)},style:{margin:"4px"},children:P(M.id,M.mod)},M.id)};return(0,l.jsxs)("div",{children:["Starter:",(0,l.jsx)("span",{children:n.map(d)}),(0,l.jsx)("br",{}),i==="pick"&&(0,l.jsxs)("span",{children:["Counter:",o.map(d)]}),(0,l.jsx)("br",{}),i==="pick"&&r.length>0&&(0,l.jsxs)("span",{children:["TB:",r.map(d)]})]})},Ce=Se,je=Object.defineProperty,w=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,W=(f,e,t)=>e in f?je(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t,ye=(f,e)=>{for(var t in e||(e={}))Ie.call(e,t)&&W(f,t,e[t]);if(w)for(var t of w(e))Te.call(e,t)&&W(f,t,e[t]);return f};const Re=f=>React.createElement("svg",ye({xmlns:"http://www.w3.org/2000/svg",className:"undo_svg__icon",viewBox:"0 0 1024 1024",fill:"#fff"},f),React.createElement("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}));var G="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNNTExLjQgMTI0QzI5MC41IDEyNC4zIDExMiAzMDMgMTEyIDUyMy45YzAgMTI4IDYwLjIgMjQyIDE1My44IDMxNS4ybC0zNy41IDQ4Yy00LjEgNS4zLS4zIDEzIDYuMyAxMi45bDE2Ny0uOGM1LjIgMCA5LTQuOSA3LjctOS45TDM2OS44IDcyN2E4IDggMCAwIDAtMTQuMS0zTDMxNSA3NzYuMWMtMTAuMi04LTIwLTE2LjctMjkuMy0yNmEzMTguNjQgMzE4LjY0IDAgMCAxLTY4LjYtMTAxLjdDMjAwLjQgNjA5IDE5MiA1NjcuMSAxOTIgNTIzLjlzOC40LTg1LjEgMjUuMS0xMjQuNWMxNi4xLTM4LjEgMzkuMi03Mi4zIDY4LjYtMTAxLjcgMjkuNC0yOS40IDYzLjYtNTIuNSAxMDEuNy02OC42QzQyNi45IDIxMi40IDQ2OC44IDIwNCA1MTIgMjA0czg1LjEgOC40IDEyNC41IDI1LjFjMzguMSAxNi4xIDcyLjMgMzkuMiAxMDEuNyA2OC42IDI5LjQgMjkuNCA1Mi41IDYzLjYgNjguNiAxMDEuNyAxNi43IDM5LjQgMjUuMSA4MS4zIDI1LjEgMTI0LjVzLTguNCA4NS4xLTI1LjEgMTI0LjVhMzE4LjY0IDMxOC42NCAwIDAgMS02OC42IDEwMS43Yy03LjUgNy41LTE1LjMgMTQuNS0yMy40IDIxLjJhNy45MyA3LjkzIDAgMCAwLTEuMiAxMS4xbDM5LjQgNTAuNWMyLjggMy41IDcuOSA0LjEgMTEuNCAxLjNDODU0LjUgNzYwLjggOTEyIDY0OS4xIDkxMiA1MjMuOWMwLTIyMS4xLTE3OS40LTQwMC4yLTQwMC42LTM5OS45eiIvPjwvc3ZnPg==",xe=["red","blue"],De=function(){var e=(0,Z.useModel)("HscTool.index"),t=e.config,u=he(t),i=u.mapPool,n=u.matchHistory,o=u.setMatchHistory,r=u.strikedMaps,d=u.strikeMap,s=u.pickMap,M=u.availableMaps,h=u.getNextAvailableMaps,c=u.lastPickedMap,I=u.resetToMap;console.log({matchHistory:n,strikedMaps:r,strikeMap:d,pickMap:s,availableMaps:M,getNextAvailableMaps:h,lastPickedMap:c});var v=n.length>0?"pick":"strike";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E.Z,{title:"\u5F53\u524D\u89C4\u5219",style:{marginBottom:20}}),(0,l.jsx)(E.Z,{title:"\u6BD4\u8D5B\u6D41\u7A0B",style:{marginBottom:20},children:(0,l.jsx)(_.Z,{gutter:24,children:xe.map(function(g){return(0,l.jsx)(ee.Z,{span:9,children:(0,l.jsxs)(k.Z,{layout:"horizontal",children:[g==="red"?(0,l.jsx)(k.Z.Item,{label:"strikedMaps",children:r.map(function(a){return P(a.id,a.mod)})}):(0,l.jsx)(k.Z.Item,{style:{visibility:"hidden"},name:g+"Strike",label:g+"Strike",children:(0,l.jsx)(z.Z,{})}),(0,l.jsxs)("div",{style:{visibility:g==="red"?"visible":"hidden"},children:["Default Pick: ",n[0]&&(0,l.jsxs)(l.Fragment,{children:[P(n[0].mapId,n[0].mod),n.find(function(a){return a.mod==="TB"})&&P("TB","TB"),(0,l.jsx)(Q.Z,{title:"reset to this pick?",onConfirm:function(){return I(n[0].mapId)},children:(0,l.jsx)(O.ZP,{type:"link",style:{padding:0,verticalAlign:"middle"},children:(0,l.jsx)("img",{src:G,style:{width:20,height:20},alt:"undo"})})})]})||"ah?"]}),(0,l.jsx)("br",{}),(0,l.jsx)(k.Z.Item,{label:g+"Picks",children:(0,l.jsx)("div",{children:n.filter(function(a){return a.team===g}).map(function(a,N){return(0,l.jsxs)("li",{style:{height:30},children:[P(a.mapId,a.mod),(0,l.jsx)(Q.Z,{title:"reset to this pick?",onConfirm:function(){return I(a.mapId)},children:(0,l.jsx)(O.ZP,{type:"link",style:{padding:0,verticalAlign:"middle"},children:(0,l.jsx)("img",{src:G,style:{width:20,height:20},alt:"undo"})})})]},a.mapId)})})}),(0,l.jsx)(Ce,{onMapSelect:function(N,y){if(n.length>0){if(y==="TB"){s(N,"all",y);return}s(N,g,y)}else d(N,g,y)},mapPool:h(g),currentStage:v})]})},g)})})}),(0,l.jsx)(E.Z,{title:"\u4E0B\u4E00\u5F20\u53EF\u9009\u56FE",style:{marginBottom:20}})]})},Ne=De,ke={},Ae=function(){return(0,l.jsx)(U._z,{ghost:!0,title:"HSC\u6BD4\u8D5B\u52A9\u624B",children:(0,l.jsxs)("div",{className:ke.container,children:[(0,l.jsx)(q,{}),(0,l.jsx)(Ne,{})]})})},Be=Ae}}]);
